<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<style>
    /* Departure Mono í°íŠ¸ */
    @font-face {
        font-family: 'Departure Mono';
        src: url('https://cdn.jsdelivr.net/gh/ozcanzaferayan/departure-mono@main/fonts/DepartureMono-Regular.woff2') format('woff2');
        font-weight: normal;
        font-style: normal;
    }

    body {
        margin: 0;
        padding: 0;
        font-family: 'Departure Mono', monospace; 
        background-color: transparent;
        color: #37352f;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        overflow: hidden;
    }
    .container {
        display: flex;
        gap: 40px; /* ì •ë³´ê°€ ë§ì•„ì ¸ì„œ ê°„ê²©ì„ ì‚´ì§ ë„“í˜€ ê°€ë…ì„± í™•ë³´ */
        text-align: center;
        align-items: flex-start; /* ìƒë‹¨ ì •ë ¬ */
    }
    .clock-box {
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    .label {
        font-size: 13px; 
        color: #9b9a97;
        margin-bottom: 2px;
        text-transform: uppercase;
        letter-spacing: 0px; 
    }
    .time {
        font-size: 32px; 
        font-weight: normal;
        white-space: nowrap;
        line-height: 1.2;
    }
    .date {
        font-size: 13px;
        color: #9b9a97;
        white-space: nowrap;
        opacity: 0.8;
        margin-top: -2px;
        margin-bottom: 6px;
    }
    /* â–¼â–¼â–¼ ë‚ ì”¨ ìŠ¤íƒ€ì¼ â–¼â–¼â–¼ */
    .weather {
        font-size: 14px;
        color: #37352f;
        background: rgba(155, 154, 151, 0.15); /* ì•„ì£¼ ì˜…ì€ íšŒìƒ‰ ë°°ê²½ */
        padding: 4px 8px;
        border-radius: 6px;
        display: inline-block;
        margin-top: 2px;
        white-space: nowrap;
    }
    
    /* ë‹¤í¬ëª¨ë“œ ëŒ€ì‘ */
    @media (prefers-color-scheme: dark) {
        body { color: #ffffff; }
        .label, .date { color: rgba(255, 255, 255, 0.6); }
        .weather { color: #ffffff; background: rgba(255, 255, 255, 0.15); }
    }
</style>
</head>
<body>

<div class="container">
    <div class="clock-box">
        <div class="label">ğŸ‡¨ğŸ‡¦ Calgary</div>
        <div class="time" id="local-time">00:00</div>
        <div class="date" id="local-date">--- --, ---</div>
        <div class="weather" id="local-weather">Loading...</div>
    </div>

    <div class="clock-box">
        <div class="label" id="target-label">ğŸ‡°ğŸ‡· Seoul</div>
        <div class="time" id="target-time">00:00</div>
        <div class="date" id="target-date">--- --, ---</div>
        <div class="weather" id="target-weather">Loading...</div>
    </div>
</div>

<script>
    // â–¼â–¼â–¼ ì„¤ì • êµ¬ê°„ â–¼â–¼â–¼
    const targetTimeZone = 'Asia/Seoul'; 
    
    // ë‚ ì”¨ ì¢Œí‘œ ì„¤ì • (Open-Meteo APIìš© ìœ„ë„, ê²½ë„)
    const cities = {
        local: { lat: 51.0501, lon: -114.0853 }, // ìº˜ê±°ë¦¬ ì¢Œí‘œ
        target: { lat: 37.5665, lon: 126.9780 }  // ì„œìš¸ ì¢Œí‘œ
    };
    // â–²â–²â–² ì„¤ì • ë â–²â–²â–²

    function updateTime() {
        const now = new Date();
        const dateOptions = { month: 'short', day: 'numeric', weekday: 'short' };

        // 1. ìº˜ê±°ë¦¬ ì‹œê°„ & ë‚ ì§œ
        document.getElementById('local-time').innerText = now.toLocaleTimeString('en-US', {
            hour: '2-digit', minute: '2-digit', hour12: false 
        });
        document.getElementById('local-date').innerText = now.toLocaleDateString('en-US', dateOptions);

        // 2. ì„œìš¸ ì‹œê°„ & ë‚ ì§œ
        document.getElementById('target-time').innerText = now.toLocaleTimeString('en-US', {
            timeZone: targetTimeZone, hour: '2-digit', minute: '2-digit', hour12: false 
        });
        document.getElementById('target-date').innerText = now.toLocaleDateString('en-US', {
            ...dateOptions, timeZone: targetTimeZone
        });
    }

    // ë‚ ì”¨ ì•„ì´ì½˜ ë³€í™˜ í•¨ìˆ˜ (WMO ì½”ë“œ -> ì´ëª¨ì§€)
    function getWeatherIcon(code) {
        if (code === 0) return 'â˜€ï¸'; // ë§‘ìŒ
        if (code >= 1 && code <= 3) return 'â˜ï¸'; // íë¦¼
        if (code >= 45 && code <= 48) return 'ğŸŒ«ï¸'; // ì•ˆê°œ
        if (code >= 51 && code <= 67) return 'ğŸŒ§ï¸'; // ë¹„
        if (code >= 71 && code <= 77) return 'â„ï¸'; // ëˆˆ
        if (code >= 80 && code <= 99) return 'â›ˆï¸'; // í­í’ìš°
        return 'ğŸŒ¡ï¸';
    }

    // ë‚ ì”¨ ì •ë³´ ê°€ì ¸ì˜¤ê¸° (Open-Meteo API)
    async function fetchWeather(lat, lon, elementId) {
        try {
            const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`;
            const response = await fetch(url);
            const data = await response.json();
            
            const temp = Math.round(data.current_weather.temperature);
            const weatherCode = data.current_weather.weathercode;
            const icon = getWeatherIcon(weatherCode);

            document.getElementById(elementId).innerText = `${icon} ${temp}Â°C`;
        } catch (error) {
            console.error('Weather Fetch Error:', error);
            document.getElementById(elementId).innerText = '--Â°C';
        }
    }

    function updateAllWeather() {
        fetchWeather(cities.local.lat, cities.local.lon, 'local-weather');
        fetchWeather(cities.target.lat, cities.target.lon, 'target-weather');
    }

    // ì‹œê°„ì€ 1ì´ˆë§ˆë‹¤ ê°±ì‹ 
    setInterval(updateTime, 1000);
    updateTime();

    // ë‚ ì”¨ëŠ” ì²˜ìŒì— í•œ ë²ˆ ì‹¤í–‰í•˜ê³ , 30ë¶„ë§ˆë‹¤ ê°±ì‹ 
    updateAllWeather();
    setInterval(updateAllWeather, 1800000); 

</script>

</body>
</html>
